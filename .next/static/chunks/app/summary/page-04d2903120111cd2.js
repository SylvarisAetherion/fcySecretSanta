(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[129],{7705:function(e,r,t){Promise.resolve().then(t.bind(t,5376))},9376:function(e,r,t){"use strict";var a=t(5475);t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},5376:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return i}});var a=t(7437),s=t(2265),n=t(9376);function o(){let[e,r]=(0,s.useState)([]),[t,o]=(0,s.useState)(!0),[i,c]=(0,s.useState)(!1),[l,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)(!1),[f,p]=(0,s.useState)(null),g=(0,n.useRouter)(),x=(0,n.useSearchParams)();(0,s.useEffect)(()=>{let e=x.get("mode"),r=x.get("roomId");"online"===e&&r?(d(!0),p(r),m("true"===localStorage.getItem("host_".concat(r))),b(r)):h()},[x,g]),(0,s.useEffect)(()=>{if(l&&f){let e=setInterval(async()=>{try{let e=await fetch("/api/rooms",{method:"POST",body:JSON.stringify({action:"status",roomId:f})});(await e.json()).error&&g.push("/")}catch(e){console.error(e)}},3e3);return()=>clearInterval(e)}},[l,f,g]);let b=async e=>{try{let t=await fetch("/api/rooms",{method:"POST",body:JSON.stringify({action:"status",roomId:e})}),a=await t.json();a.results?(r(a.results),o(a.isRandomMode),c(!0)):g.push("/")}catch(e){console.error(e),g.push("/")}},h=()=>{let e=localStorage.getItem("secretSantaFinalPairs"),t=localStorage.getItem("secretSantaRandomMode");if(!e){g.push("/");return}r(JSON.parse(e)),o("true"===t),c(!0)},y=async()=>{if(l&&f&&u)try{await fetch("/api/rooms",{method:"POST",body:JSON.stringify({action:"leave",roomId:f,isHost:!0})})}catch(e){console.error("Failed to close room",e)}g.push("/")};return i?(0,a.jsxs)("main",{children:[(0,a.jsx)("div",{className:"snow-container"}),(0,a.jsx)("h1",{children:"Final Secret Santa List \uD83C\uDF81"}),(0,a.jsxs)("div",{className:"summary-container fade-in",children:[(0,a.jsx)("div",{className:"summary-list",children:e.map((e,r)=>(0,a.jsxs)("div",{className:"summary-item",children:[t&&(0,a.jsxs)("span",{className:"gift-tag",children:["Gift #",e.giftNumber," - by ",e.giftOwner||e.giver]}),(0,a.jsxs)("div",{className:"pair-info",children:[(0,a.jsx)("span",{className:"name",children:(0,a.jsx)("strong",{children:e.giver})}),(0,a.jsx)("span",{className:"gives-to",children:"gives to"}),(0,a.jsx)("span",{className:"name",children:(0,a.jsx)("strong",{children:e.receiver})})]})]},r))}),(0,a.jsxs)("div",{className:"controls",style:{flexDirection:"column",gap:"1rem"},children:[l&&u&&(0,a.jsx)("button",{className:"close-room-btn",onClick:y,children:"Close Room & Back Home \uD83C\uDFE0"}),(0,a.jsx)("button",{className:"back-btn",onClick:()=>g.push("/"),children:"⬅️ Start New Game"})]})]}),(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n        .summary-container { background: rgba(255, 255, 255, 0.1); padding: 2rem; border-radius: 20px; border: 2px solid #ffd700; box-shadow: 0 0 20px rgba(255, 215, 0, 0.3); width: 100%; box-sizing: border-box; margin-top: 2rem; }\n        .summary-list { display: flex; flex-direction: column; gap: 1rem; margin-bottom: 2rem; }\n        .summary-item { background: rgba(255, 255, 255, 0.05); padding: 1.2rem; border-radius: 12px; border: 1px solid rgba(255, 215, 0, 0.2); display: flex; flex-direction: column; align-items: center; gap: 0.5rem; }\n        .gift-tag { color: #ffd700; font-weight: bold; font-size: 0.8rem; text-transform: uppercase; background: rgba(255, 215, 0, 0.1); padding: 2px 10px; border-radius: 10px; }\n        .pair-info { display: flex; align-items: center; justify-content: center; gap: 10px; flex-wrap: wrap; text-align: center; width: 100%; }\n        .name { color: #fff; font-size: 1.1rem; word-break: break-word; }\n        .gives-to { color: #ffd700; font-size: 0.9rem; font-style: italic; opacity: 0.8; }\n        .controls { display: flex; justify-content: center; margin-top: 1rem; align-items: center; }\n        .back-btn { background: #d42426; color: white; padding: 12px 24px; border-radius: 30px; border: none; font-size: 1.1rem; cursor: pointer; transition: transform 0.2s, background 0.2s; box-shadow: 0 4px 15px rgba(212, 36, 38, 0.3); width: 100%; }\n        .close-room-btn { background: #1a472a; color: #ffd700; padding: 12px 24px; border-radius: 30px; border: 2px solid #ffd700; font-size: 1.1rem; cursor: pointer; transition: transform 0.2s, background 0.2s; box-shadow: 0 4px 15px rgba(26, 71, 42, 0.3); width: 100%; }\n        .close-room-btn:hover { transform: scale(1.05); background: #245c38; }\n        .back-btn:hover { transform: scale(1.05); background: #b31d1f; }\n        @media (max-width: 480px) { .summary-container { padding: 1rem; } }\n      "}})]}):null}function i(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(o,{})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7705)}),_N_E=e.O()}]);